<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>Address</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="Octopus'Shop project">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" th:href="@{styles/bootstrap4/bootstrap.min.css}">
<link th:href="@{plugins/font-awesome-4.7.0/css/font-awesome.min.css}" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" th:href="@{styles/cart.css}">
<link rel="stylesheet" type="text/css" th:href="@{styles/cart_responsive.css}">
</head>
<body onload="init()">
<!--隐藏的商品返回值,用于存放数据-->
<p style="display: none;" id="cartData" th:text="${carts}"></p>
<div class="super_container">

	<!-- Header -->

	<header class="header">
		<div class="header_container">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="header_content d-flex flex-row align-items-center justify-content-start">
							<div class="logo"><a href="#">Octopus'Shop.</a></div>
							<nav class="main_nav">
								<ul>
									<li class="hassubs active">
										<a th:href="@{/home}">首页</a>
										<ul>
											<span for="1">登陆</span>
											<li><a th:href="@{/login}">Login</a></li>
											<span for="2">收藏夹</span>
											<li><a th:href="@{/collection}">Collection</a></li>
											<span for="3">购物车</span>
											<li><a th:href="@{/cart}">cart</a></li>
											<span for="4">订单</span>
											<li><a th:href="@{/order}">Order</a></li>
											<span for="5">联系我们</span>
											<li><a th:href="@{/contact}">contact</a></li>
										</ul>
									</li>
									<li class="hassubs">
										<a href="#">一级菜单分类</a>
										<ul id="categories">
											<li><a th:href="@{/findCategory2/1}" id="theOne">电器</a></li>
											<li><a th:href="@{/findCategory2/2}" id="theTwo">电器</a></li>
											<li><a th:href="@{/findCategory2/3}" id="theThree">电器</a></li>
											<li><a th:href="@{/findCategory2/4}" id="theFour">电器</a></li>
											<li><a th:href="@{/findCategory2/5}" id="theFive">电器</a></li>
											<li><a th:href="@{/findCategory2/6}" id="theSix">电器</a></li>
											<li><a th:href="@{/findCategory2/7}" id="theSenven">电器</a></li>
											<li><a th:href="@{/findCategory2/8}" id="theEight">电器</a></li>
										</ul>
									</li>
									<li><a th:href="@{/address}">收货地址管理</a></li>
									<li><a th:href="@{#}">订单</a></li>
									<li><a th:href="@{/contact}">联系我们</a></li>
								</ul>
							</nav>
							<div class="header_extra ml-auto">
								<div class="shopping_cart">
									<a th:href="@{/findProductFromCart}">
										<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
												 viewBox="0 0 489 489" style="enable-background:new 0 0 489 489;" xml:space="preserve">
											<g>
												<path d="M440.1,422.7l-28-315.3c-0.6-7-6.5-12.3-13.4-12.3h-57.6C340.3,42.5,297.3,0,244.5,0s-95.8,42.5-96.6,95.1H90.3
													c-7,0-12.8,5.3-13.4,12.3l-28,315.3c0,0.4-0.1,0.8-0.1,1.2c0,35.9,32.9,65.1,73.4,65.1h244.6c40.5,0,73.4-29.2,73.4-65.1
													C440.2,423.5,440.2,423.1,440.1,422.7z M244.5,27c37.9,0,68.8,30.4,69.6,68.1H174.9C175.7,57.4,206.6,27,244.5,27z M366.8,462
													H122.2c-25.4,0-46-16.8-46.4-37.5l26.8-302.3h45.2v41c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5v-41h139.3v41
													c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5v-41h45.2l26.9,302.3C412.8,445.2,392.1,462,366.8,462z"/>
											</g>
										</svg>
										<div>Cart<span id="cartCount"></span></div>
									</a>
								</div>
								<div class="search">
									<div class="search_icon">
										<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
										viewBox="0 0 475.084 475.084" style="enable-background:new 0 0 475.084 475.084;"
										 xml:space="preserve">
										<g>
											<path d="M464.524,412.846l-97.929-97.925c23.6-34.068,35.406-72.047,35.406-113.917c0-27.218-5.284-53.249-15.852-78.087
												c-10.561-24.842-24.838-46.254-42.825-64.241c-17.987-17.987-39.396-32.264-64.233-42.826
												C254.246,5.285,228.217,0.003,200.999,0.003c-27.216,0-53.247,5.282-78.085,15.847C98.072,26.412,76.66,40.689,58.673,58.676
												c-17.989,17.987-32.264,39.403-42.827,64.241C5.282,147.758,0,173.786,0,201.004c0,27.216,5.282,53.238,15.846,78.083
												c10.562,24.838,24.838,46.247,42.827,64.234c17.987,17.993,39.403,32.264,64.241,42.832c24.841,10.563,50.869,15.844,78.085,15.844
												c41.879,0,79.852-11.807,113.922-35.405l97.929,97.641c6.852,7.231,15.406,10.849,25.693,10.849
												c9.897,0,18.467-3.617,25.694-10.849c7.23-7.23,10.848-15.796,10.848-25.693C475.088,428.458,471.567,419.889,464.524,412.846z
												 M291.363,291.358c-25.029,25.033-55.148,37.549-90.364,37.549c-35.21,0-65.329-12.519-90.36-37.549
												c-25.031-25.029-37.546-55.144-37.546-90.36c0-35.21,12.518-65.334,37.546-90.36c25.026-25.032,55.15-37.546,90.36-37.546
												c35.212,0,65.331,12.519,90.364,37.546c25.033,25.026,37.548,55.15,37.548,90.36C328.911,236.214,316.392,266.329,291.363,291.358z
												"/>
										</g>
									</svg>
									</div>
								</div>
								<div class="hamburger"><i class="fa fa-bars" aria-hidden="true"></i></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Search Panel -->
		<div class="search_panel trans_300">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="search_panel_content d-flex flex-row align-items-center justify-content-end">
							<form action="#">
								<input type="text" class="search_input" placeholder="Search" required="required">
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Social -->
		<div class="header_social">
			<ul>
				<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
			</ul>
		</div>
	</header>

	<!-- Menu -->

	<div class="menu menu_mm trans_300">
		<div class="menu_container menu_mm">
			<div class="page_menu_content">
							
				<div class="page_menu_search menu_mm">
					<form action="#">
						<input type="search" required="required" class="page_menu_search_input menu_mm" placeholder="Search for products...">
					</form>
				</div>
				<ul class="page_menu_nav menu_mm">
					<li class="page_menu_item has-children menu_mm">
						<a href="index.html">首页<i class="fa fa-angle-down"></i></a>
						<ul class="page_menu_selection menu_mm">
							<li class="page_menu_item menu_mm"><a href="categories.html">Categories<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="product.html">Product<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="cart.html">Cart<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="checkout.html">Checkout<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="contact.html">Contact<i class="fa fa-angle-down"></i></a></li>
						</ul>
					</li>
					<li class="page_menu_item has-children menu_mm">
						<a href="categories.html">Categories<i class="fa fa-angle-down"></i></a>
						<ul class="page_menu_selection menu_mm">
							<li class="page_menu_item menu_mm"><a href="categories.html">Category<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="categories.html">Category<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="categories.html">Category<i class="fa fa-angle-down"></i></a></li>
							<li class="page_menu_item menu_mm"><a href="categories.html">Category<i class="fa fa-angle-down"></i></a></li>
						</ul>
					</li>
					<li class="page_menu_item menu_mm"><a href="index.html">Accessories<i class="fa fa-angle-down"></i></a></li>
					<li class="page_menu_item menu_mm"><a href="#">Offers<i class="fa fa-angle-down"></i></a></li>
					<li class="page_menu_item menu_mm"><a href="contact.html">Contact<i class="fa fa-angle-down"></i></a></li>
				</ul>
			</div>
		</div>

		<div class="menu_close"><i class="fa fa-times" aria-hidden="true"></i></div>

		<div class="menu_social">
			<ul>
				<li><a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
				<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
			</ul>
		</div>
	</div>
	
	<!-- Home -->

	<div class="home">
		<div class="home_container">
			<div class="home_background" style="background-image:url(/images/cart.jpg)"></div>
			<div class="home_content_container">
				<div class="container">
					<div class="row">
						<div class="col">
							<div class="home_content">
								<div class="breadcrumbs">
									<ul>
										<li><a th:href="@{/home}">首页</a></li>
										<li><a href="#">商品分类</a></li>
										<li>收货地址管理</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Cart Info -->

	<div class="cart_info">

		<div class="container">
			<div class="row">
				<div class="col">
					<!-- Column Titles -->
					<div class="cart_info_columns clearfix">
						<div class="cart_info_col cart_info_col_product">地址</div>
						<div class="cart_info_col cart_info_col_price">邮编</div>
						<div class="cart_info_col cart_info_col_quantity">电话</div>
						<div class="cart_info_col cart_info_col_total">电子邮件</div>
					</div>
				</div>
			</div>
			<div class="row cart_items_row">
				<div class="col" id="addressDiv">

					<!-- Cart Item -->
					<div class="cart_item d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
						<!-- Name -->
						<div class="cart_item_product d-flex flex-row align-items-center justify-content-start">
							<div class="cart_item_image">
								<div class="cart_item_name"><a href="">
									Smart Phone Deluxe Edition ANS SDSADAS DSADASDSA DASDASER ADAS </a></div>
							</div>
							<div class="cart_item_name_container">

								<div class="cart_item_name"><a>Smart Phone Deluxe Edition</a></div>
								<div class="cart_item_edit"><a>Edit Product</a></div>
								<div class="cart_item_edit"><a>sss</a></div>
								<div class="cart_item_edit"><a>ssss</a></div>
								<div class="cart_item_edit"><a style="color: red;">删除</a></div>
							</div>
						</div>
						<!-- code -->
						<div class="cart_item_price">790.90</div>
						<!-- phone -->
						<div class="cart_item_quantity">
							<div class="product_quantity_container">
								<div class="product_quantity clearfix">
									<span>11111111111111</span>
								</div>
							</div>
						</div>
						<!-- email -->
						<div class="cart_item_total">$790.90</div>
					</div>
				</div>
			</div>
			<div class="row row_cart_buttons">
				<div class="col">
					<div class="cart_buttons d-flex flex-lg-row flex-column align-items-start justify-content-start">
						<div class="button continue_shopping_button"><a th:href="@{/home}">继续购物</a></div>

						<div class="cart_buttons_right ml-lg-auto">
							<div class="button clear_cart_button"><a th:href="@{/addAddress}">添加新的收货地址</a></div>

							<div class="button clear_cart_button"><a th:href="'javascript:deleteAddress();'" id="deleteCart">清空收货地址</a></div>

							<div class="button update_cart_button"><a th:href="@{/address}">更新收货地址</a></div>
						</div>
					</div>
				</div>
			</div>

		</div>		
	</div>

	<!-- Footer -->
	
	<div class="footer_overlay"></div>
	<footer class="footer">
		<div class="footer_background" style="background-image:url(images/footer.jpg)"></div>
		<div class="container">
			<div class="row">
				<div class="col">
					<div class="footer_content d-flex flex-lg-row flex-column align-items-center justify-content-lg-start justify-content-center">
						<div class="footer_logo"><a href="#">Octopus'Shop.</a></div>
						<div class="copyright ml-auto mr-auto"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Zhangyk</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></div>
						<div class="footer_social ml-lg-auto">
							<ul>
								<li><a href="#"><i class="fa fa-qq" aria-hidden="true"></i></a></li>
								<li><a href="#"><i class="fa fa-weixin" aria-hidden="true"></i></a></li>
								<li><a href="#"><i class="fa fa-chrome" aria-hidden="true"></i></a></li>
								<li><a href="#"><i class="fa fa-weibo" aria-hidden="true"></i></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>
</div>

<script th:src="@{/js/jquery-3.2.1.min.js}" type="text/javascript"></script>
<script th:src="@{styles/bootstrap4/popper.js}" type="text/javascript"></script>
<script th:src="@{styles/bootstrap4/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{plugins/greensock/TweenMax.min.js}" type="text/javascript"></script>
<script th:src="@{plugins/greensock/TimelineMax.min.js}" type="text/javascript"></script>
<script th:src="@{plugins/scrollmagic/ScrollMagic.min.js}" type="text/javascript"></script>
<script th:src="@{plugins/greensock/animation.gsap.min.js}" type="text/javascript"></script>
<script th:src="@{plugins/greensock/ScrollToPlugin.min.js}" type="text/javascript"></script>
<script th:src="@{plugins/OwlCarousel2-2.2.1/owl.carousel.js}" type="text/javascript"></script>
<script th:src="@{plugins/Isotope/isotope.pkgd.min.js}" type="text/javascript"></script>
<script th:src="@{plugins/easing/easing.js}" type="text/javascript"></script>
<script th:src="@{plugins/parallax-js-master/parallax.min.js}" type="text/javascript"></script>
<script th:src="@{js/address.js}"></script>
</body>
<script>
    function deleteAddress(){
        if(confirm("确认清空地址吗？")){
            $.ajax({
                //请求方式
                type: "post",
                //请求的媒体类型
                contentType: "application/json;charset=UTF-8",
                //请求地址
                url: "/deleteAllAddress",
                //请求成功
                success: function (result) {
                    alert(result);
                    window.location.reload();
                },
                //请求失败，包含具体的错误信息
                error: function (e) {
                    console.log(e.status);
                    console.log(e.responseText);
                }
            });
        }

	}

    // function checkForTheFirstAddress(data){
     //    $.ajax({
     //        //请求方式
     //        type: "post",
     //        //请求的媒体类型
     //        contentType: "application/json;charset=UTF-8",
	// 		data:{"addressId":data},
     //        //请求地址
     //        url: "/findProductFromCart",
     //        //请求成功
     //        success: function (result) {
     //            console.log("购物车数量：", result.data);
     //            $("#cartCount").text('('+result.data+')');
     //        },
     //        //请求失败，包含具体的错误信息
     //        error: function (e) {
     //            console.log(e.status);
     //            console.log(e.responseText);
     //        }
     //    });
	// }

    function init() {
        // 初始化内容
        $.ajax({
            //请求方式
            type: "get",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //请求地址
            url: "/findCategory1",
            //请求成功
            success: function (result) {
                console.log("一级目录：", result);
                //商品一级目录
                data = result.data;
                $("#theOne").text(data[0].category1Name);
                $("#theTwo").text(data[1].category1Name);
                $("#theThree").text(data[2].category1Name);
                $("#theFour").text(data[3].category1Name);
                $("#theFive").text(data[4].category1Name);
                $("#theSix").text(data[5].category1Name);
                $("#theSenven").text(data[6].category1Name);
                $("#theEight").text(data[7].category1Name);
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.log(e.status);
                console.log(e.responseText);
            }
        });

        $.ajax({
            //请求方式
            type: "post",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //请求地址
            url: "/findProductFromCartCount",
            //请求成功
            success: function (result) {
                console.log("购物车数量：", result.data);
				$("#cartCount").text('('+result.data+')');
            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.log(e.status);
                console.log(e.responseText);
            }
        });

        $.ajax({
            //请求方式
            type: "get",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //请求地址
            url: "/findAllAddress",
            //请求成功
            success: function (result) {
                console.log("所有的收货地址：", result.data);
				var arr = result.data;
                $("#addressDiv").html("");
                for(var i=0;i<arr.length;i++){
                    var str = "<div class=\"cart_item d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start\">\n" +
                        "\t\t\t\t\t\t<!-- Name -->\n" +
                        "\t\t\t\t\t\t<div class=\"cart_item_product d-flex flex-row align-items-center justify-content-start\">\n" +
                        "\t\t\t\t\t\t\t<div class=\"cart_item_image\">\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"cart_item_name\"><a href=\"\">\n" +
                        "\t\t\t\t\t\t\t\t\t具体地址： "+arr[i].address +"</a></div>\n" +
                        "\t\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t\t<div class=\"cart_item_name_container\">\n" +
                        "\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"cart_item_name\"><a>姓名:"+arr[i].addressName+"</a></div>\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"cart_item_edit\"><a>性别:"+arr[i].sex+"</a></div>\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"cart_item_edit\"><a>所属组织:"+arr[i].company+"</a></div>\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"cart_item_edit\"><a>性别:"+arr[i].sex+"</a></div>\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"cart_item_edit\"><a href= 'javascript:deleteAddressWithId("+arr[i].addressId+");' style='color: red;' >删除</a></div>\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"cart_item_edit\"><a href= '/findProductFromCart?addressId="+arr[i].addressId+"' style='color: blue;' >选为默认地址</a></div>\n" +
						"\t\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t<!-- code -->\n" +
                        "\t\t\t\t\t\t<div class=\"cart_item_price\">"+arr[i].code+"</div>\n" +
                        "\t\t\t\t\t\t<!-- phone -->\n" +
                        "\t\t\t\t\t\t<div class=\"cart_item_quantity\">\n" +
                        "\t\t\t\t\t\t\t<div class=\"product_quantity_container\">\n" +
                        "\t\t\t\t\t\t\t\t<div class=\"product_quantity clearfix\">\n" +
                        "\t\t\t\t\t\t\t\t\t<span>"+arr[i].phone+"</span>\n" +
                        "\t\t\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t</div>\n" +
                        "\t\t\t\t\t\t<!-- email -->\n" +
                        "\t\t\t\t\t\t<div class=\"cart_item_total\">"+arr[i].email+"</div>\n" +
                        "\t\t\t\t\t</div>";
                    $("#addressDiv").append(str);
                }


            },
            //请求失败，包含具体的错误信息
            error: function (e) {
                console.log(e.status);
                console.log(e.responseText);
            }
        });


    }
    function deleteAddressWithId(data){
        if(confirm("确定要删除该收货地址嘛？")) {
            $.ajax({
                type: "get",
                //请求的媒体类型
                contentType: "application/json;charset=UTF-8",
                //请求地址
                url: "/deleteAddressWithId/" + data,
                //请求成功
                success: function (result) {
                    alert(result);
                },
                //请求失败，包含具体的错误信息
                error: function (e) {
                    console.log(e.status);
                    console.log(e.responseText);
                }

            });
        }

    }


</script>
</html>